modules:
  jira:globalPage:
    - key: resource-assign-demo-app
      resource: main
      resolver:
        function: resolver
      title: ResourceAssignDemo

  # Khai báo các trigger theo các key event
  trigger:
  - key: provide-oauth-url
    function: provide-oauth-function
    events:
      - avi:forge:upgraded:app

  # Khai báo webtrigger cho server callback lúc grant quyền
  webtrigger:
    - key: authen-app-web-trigger-key
      function: authen-trigger-function

  function:
    - key: resolver
      handler: index.handler
    - key: provide-oauth-function
      handler: trigger.provideOAuthUrlForUser
    - key: authen-trigger-function
      handler: trigger.authenBECallbackTrigger

resources:
  - key: main
    path: static/view/build
    tunnel:
        port: 3000
app:
  id: ari:cloud:ecosystem::app/87284dfd-9947-4a51-a7bb-20a3c938db04
  licensing:
    enabled: true
permissions:
  external:
    fetch:
      backend:
        - "*.ngrok-free.app"
  content:
    styles:
      - 'unsafe-inline'
  scopes:
    - storage:app
