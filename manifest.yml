modules:
  jira:globalPage:
    - key: resource-assign-demo-app
      resource: main
      resolver:
        function: resolver
      title: ResourceAssignDemo
      layout: blank

  # Khai báo các trigger theo các key event
  trigger:
    - key: provide-oauth-url
      function: provide-oauth-function
      events:
        - avi:forge:upgraded:app

  # Khai báo webtrigger cho server callback lúc grant quyền
  webtrigger:
    - key: authen-app-web-trigger-key
      function: authen-trigger-function

  function:
    - key: resolver
      handler: index.handler
    - key: provide-oauth-function
      handler: trigger.provideOAuthUrlForUser
    - key: authen-trigger-function
      handler: trigger.authenBECallbackTrigger

resources:
  - key: main
    path: static/view/build
    tunnel:
      port: 3000
app:
  # Replace app id here
  id: ari:cloud:ecosystem::app/cd7a95c9-5661-4973-b002-bdf61e1603f6
  #----#
  licensing:
    enabled: true
permissions:
  external:
    fetch:
      backend:
        - "*.ngrok-free.app"
  content:
    styles:
      - "unsafe-inline"
  scopes:
    - storage:app
