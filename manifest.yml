modules:
  jira:globalPage:
    - key: forgecustomuidemo-hello-world-page
      resource: main
      resolver:
        function: resolver
      title: ForgeCustomUIDemo

  # Khai báo các trigger theo các key event
  trigger:
  - key: provide-oauth-url
    function: provide-oauth-function
    events:
      - avi:forge:upgraded:app

  # Khai báo webtrigger cho server callback lúc grant quyền
  webtrigger:
    - key: authen-app-web-trigger-key
      function: authen-trigger-function

  function:
    - key: resolver
      handler: index.handler
    - key: provide-oauth-function
      handler: trigger.provideOAuthUrlForUser
    - key: authen-trigger-function
      handler: trigger.authenBECallbackTrigger

resources:
  - key: main
    path: static/view/build
app:
  id: ari:cloud:ecosystem::app/c0232203-0228-46e3-9533-52a556e7ccbd
permissions:
  external:
    fetch:
      backend:
        - "*.ngrok-free.app"
  content:
    styles:
      - 'unsafe-inline'
  scopes:
    - storage:app
